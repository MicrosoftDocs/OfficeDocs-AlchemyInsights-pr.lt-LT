---
title: "\"OAuth 2,0\" ir \"OpenID Connect\" protokolų trikčių diagnostika"
ms.author: v-smandalika
author: v-smandalika
manager: dansimp
ms.date: 03/17/2021
audience: Admin
ms.topic: article
ms.service: o365-administration
ROBOTS: NOINDEX, NOFOLLOW
localization_priority: Priority
ms.collection: Adm_O365
ms.custom:
- "9776"
- "9004342"
ms.openlocfilehash: d2f14d4d16bea890b564cdb9bd9ac3875c28d115
ms.sourcegitcommit: c08bed4071baa3bb5879496df3ed44fb828c8367
ms.translationtype: MT
ms.contentlocale: lt-LT
ms.lasthandoff: 03/19/2021
ms.locfileid: "51036403"
---
# <a name="troubleshoot-oauth-20-and-openid-connect-protocols"></a><span data-ttu-id="faa51-102">"OAuth 2,0" ir "OpenID Connect" protokolų trikčių diagnostika</span><span class="sxs-lookup"><span data-stu-id="faa51-102">Troubleshoot OAuth 2.0 and OpenID Connect protocols</span></span>

<span data-ttu-id="faa51-103">Norėdami išspręsti "OAuth 2,0" ir "OpenID Connect" problemas, atlikite šiuos rekomenduojamus veiksmus:</span><span class="sxs-lookup"><span data-stu-id="faa51-103">To resolve OAuth 2.0 and OpenID Connect issues, perform the following recommended steps:</span></span>

<span data-ttu-id="faa51-104">Peržiūrėkite šiuos straipsnius, susijusius su konfigūravimu ir trikčių diagnostika "OAuth 2,0" ir "OpenID Connect" protokolai:</span><span class="sxs-lookup"><span data-stu-id="faa51-104">Refer to the following articles that are related to configuration and troubleshooting OAuth 2.0 and OpenID Connect protocols:</span></span>

- <span data-ttu-id="faa51-105">["Microsoft" tapatybės platforma ir "OAuth" 2,0 autorizavimo kodo srautas](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-auth-code-flow) – šiame straipsnyje aprašyta, kaip programa tiesiogiai su **kodo suteikimo (pkce) srautu** taikomąja programa, naudojant bet kurią kalbą.</span><span class="sxs-lookup"><span data-stu-id="faa51-105">[Microsoft identity platform and OAuth 2.0 authorization code flow](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-auth-code-flow) - This article describes how to program directly against the **code grant (PKCE) flow** in your application, using any language.</span></span>
- <span data-ttu-id="faa51-106">["Microsoft" tapatybės platforma ir "OAuth 2,0" kliento kredencialų srautas](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-client-creds-grant-flow) – šiame straipsnyje aprašyta, kaip programa tiesiogiai **kliento kredencialų srautui** taikomojoje programoje.</span><span class="sxs-lookup"><span data-stu-id="faa51-106">[Microsoft identity platform and the OAuth 2.0 client credentials flow](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-client-creds-grant-flow) - This article describes how to program directly against the **client credentials flow** in your application.</span></span>
- <span data-ttu-id="faa51-107">["Microsoft" tapatybės platforma ir "OAuth 2,0" išteklių savininko slaptažodžio kredencialai](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth-ropc) – šiame straipsnyje aprašyta, kaip programa tiesiogiai su " **ropc" srautu** taikomojoje programoje.</span><span class="sxs-lookup"><span data-stu-id="faa51-107">[Microsoft identity platform and OAuth 2.0 Resource Owner Password Credentials](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth-ropc) - This article describes how to program directly against the **ROPC flow** in your application.</span></span>
    - <span data-ttu-id="faa51-108">"Microsoft Identity" platforma palaiko tik "ROPC", skirtą "Azure AD" nuomininkams, o ne asmeniniams abonementams.</span><span class="sxs-lookup"><span data-stu-id="faa51-108">The Microsoft identity platform only supports ROPC for Azure AD tenants, and not for personal accounts.</span></span> <span data-ttu-id="faa51-109">Tai reiškia, kad turite naudoti konkretaus nuomotojo galinį punktą **( https://login.microsoftonline.com/{TenantId_or_Name})** arba **organizacijos** galinį punktą.</span><span class="sxs-lookup"><span data-stu-id="faa51-109">This means that you must use a tenant-specific endpoint **(https://login.microsoftonline.com/{TenantId_or_Name})** or the **organizations** endpoint.</span></span>
    - <span data-ttu-id="faa51-110">Asmeninės paskyros, kviečiamos į "Azure AD" nuomotoją, negali naudoti "ROPC".</span><span class="sxs-lookup"><span data-stu-id="faa51-110">Personal accounts that are invited to an Azure AD tenant can't use ROPC.</span></span>
    - <span data-ttu-id="faa51-111">Paskyros, kuriose nėra slaptažodžių, negali prisijungti per ROPC.</span><span class="sxs-lookup"><span data-stu-id="faa51-111">Accounts that don't have passwords can't sign in through ROPC.</span></span> <span data-ttu-id="faa51-112">Pagal šį scenarijų rekomenduojame naudoti skirtingą programos srautą.</span><span class="sxs-lookup"><span data-stu-id="faa51-112">For this scenario, we recommend that you use a different flow for your app, instead.</span></span>
    - <span data-ttu-id="faa51-113">Jei vartotojai turi naudoti [kelių dalių autentifikavimą (MFA)](https://docs.microsoft.com/azure/active-directory/authentication/concept-mfa-howitworks) , kad prisijungtų prie taikomosios programos, jie bus užblokuoti.</span><span class="sxs-lookup"><span data-stu-id="faa51-113">If users need to use [multi-factor authentication (MFA)](https://docs.microsoft.com/azure/active-directory/authentication/concept-mfa-howitworks) to log in to the application, they will be blocked.</span></span>
    - <span data-ttu-id="faa51-114">ROPC nepalaikoma [hibridinės tapatybės susiejimo](https://docs.microsoft.com/azure/active-directory/hybrid/whatis-fed) scenarijuose (pvz., "Azure AD" ir ADFS, naudojami vietinėms paskyroms autentifikuoti).</span><span class="sxs-lookup"><span data-stu-id="faa51-114">ROPC is not supported in [hybrid identity federation](https://docs.microsoft.com/azure/active-directory/hybrid/whatis-fed) scenarios (for example, Azure AD and ADFS used to authenticate on-premises accounts).</span></span> <span data-ttu-id="faa51-115">Jei vartotojai yra visame puslapyje nukreipiami į vietinį tapatybės teikėją, "Azure AD" negali patikrinti vartotojo vardo ir slaptažodžio prieš tą tapatybės teikėją.</span><span class="sxs-lookup"><span data-stu-id="faa51-115">If users are full-page redirected to an on-premises identity provider, Azure AD is not able to test the username and password against that identity provider.</span></span> <span data-ttu-id="faa51-116">[Pass-per autentifikavimo](https://docs.microsoft.com/azure/active-directory/hybrid/how-to-connect-pta) palaikomas su ropc, tačiau.</span><span class="sxs-lookup"><span data-stu-id="faa51-116">[Pass-through authentication](https://docs.microsoft.com/azure/active-directory/hybrid/how-to-connect-pta) is supported with ROPC, however.</span></span>
    - <span data-ttu-id="faa51-117">Hibridinis tapatybės susiejimo scenarijų išimtis būtų tokia: "Home Realm" aptikimo strategija naudojant " **Allowcloudpasswordvalidation** " reikšmę **True** įgalins "ropc" srautą, jei norite dirbti su išoriniu vartotoju, kai vietinis slaptažodis sinchronizuojamas su debesimi.</span><span class="sxs-lookup"><span data-stu-id="faa51-117">An exception to a hybrid identity federation scenario would be the following: Home Realm Discovery policy with **AllowCloudPasswordValidation** set to **TRUE** will enable ROPC flow to work for federated users when on-premises password is synced to cloud.</span></span> <span data-ttu-id="faa51-118">Daugiau informacijos ieškokite skyriuje [tiesioginių "ROPC" išorinių vartotojų autentifikavimas naudojant senstelėjusias taikomąsias programas](https://docs.microsoft.com/azure/active-directory/manage-apps/configure-authentication-for-federated-users-portal#enable-direct-ropc-authentication-of-federated-users-for-legacy-applications)</span><span class="sxs-lookup"><span data-stu-id="faa51-118">For more information, see [Enable direct ROPC authentication of federated users for legacy applications](https://docs.microsoft.com/azure/active-directory/manage-apps/configure-authentication-for-federated-users-portal#enable-direct-ropc-authentication-of-federated-users-for-legacy-applications)</span></span> 
- <span data-ttu-id="faa51-119">["Microsoft" tapatybės platforma ir "OAuth 2,0" srauto vardu](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-on-behalf-of-flow) – šiame straipsnyje aprašyta, kaip programa tiesiogiai **(OBO) srautui** taikomojoje programoje.</span><span class="sxs-lookup"><span data-stu-id="faa51-119">[Microsoft identity platform and OAuth 2.0 On-Behalf-Of flow](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-on-behalf-of-flow) - This article describes how to program directly against the **on-behalf-of (OBO) flow** in your application.</span></span>
- <span data-ttu-id="faa51-120">["Microsoft" tapatybės platformos ir "OpenID Connect" protokolas](https://docs.microsoft.com/azure/active-directory/develop/v2-protocols-oidc) – šiame straipsnyje parodyta, kaip įdiegti "OpenID Connect" protokolą nepriklausomai nuo kalbos ir aprašoma, kaip siųsti ir gauti http pranešimą nenaudojant jokių "Microsoft" atvirosios šaltinio bibliotekų.</span><span class="sxs-lookup"><span data-stu-id="faa51-120">[Microsoft identity platform and OpenID Connect protocol](https://docs.microsoft.com/azure/active-directory/develop/v2-protocols-oidc) - This article shows how to implement the OpenID Connect protocol independent of language, and describes how to send and receive HTTP messages without using any Microsoft open-source libraries.</span></span>

<span data-ttu-id="faa51-121">**"Access" žetonai**</span><span class="sxs-lookup"><span data-stu-id="faa51-121">**Access Tokens**</span></span>

<span data-ttu-id="faa51-122">["Microsoft" tapatybės platformos prieigos žetonai](https://docs.microsoft.com/azure/active-directory/develop/access-tokens) – Sužinokite, kaip jūsų API gali patvirtinti ir naudoti "Access" atpažinimo ženklo teiginius.</span><span class="sxs-lookup"><span data-stu-id="faa51-122">[Microsoft identity platform access tokens](https://docs.microsoft.com/azure/active-directory/develop/access-tokens) - Learn how your API can validate and use the claims inside an access token.</span></span> <span data-ttu-id="faa51-123">Visi šiame straipsnyje nurodyti dokumentai, išskyrus tuos atvejus, kai pažymėta, taikomi tik žetonams, kurie buvo išduoti jūsų įregistruotam API.</span><span class="sxs-lookup"><span data-stu-id="faa51-123">All documentation in this article, except where noted, applies only to tokens issued for APIs you've registered.</span></span> <span data-ttu-id="faa51-124">Jis netaikomas žetonams, išduodamais "Microsoft" valdomoms API, taip pat šie žetonai negali būti naudojami norint patikrinti, kaip "Microsoft" tapatybės platforma pateiks Jūsų kuriamos API atpažinimo ženklus.</span><span class="sxs-lookup"><span data-stu-id="faa51-124">It does not apply to tokens issued for Microsoft-owned APIs, nor can those tokens be used to validate how the Microsoft identity platform will issue tokens for an API you create.</span></span>

<span data-ttu-id="faa51-125">**Taikomosios programos konfigūracija**</span><span class="sxs-lookup"><span data-stu-id="faa51-125">**Application Configuration**</span></span>

<span data-ttu-id="faa51-126">[Peradresavimo URI (atsakymo URL) apribojimai ir apribojimai](https://docs.microsoft.com/azure/active-directory/develop/reply-url) – Sužinokite, kaip SUKONFIGŪRUOTI peradresavimo URI (atsakymo URL).</span><span class="sxs-lookup"><span data-stu-id="faa51-126">[Redirect URI (reply URL) restrictions and limitations](https://docs.microsoft.com/azure/active-directory/develop/reply-url) - Learn how to configure your Redirect URI (reply URL).</span></span> <span data-ttu-id="faa51-127">Peradresavimo URI arba atsakymo URL yra vieta, kurioje autorizuotas serveris siunčia vartotoją, kai programa sėkmingai autorizuotas ir jai suteiktas autorizavimo kodas arba prieigos žetonas.</span><span class="sxs-lookup"><span data-stu-id="faa51-127">A redirect URI, or reply URL, is the location where the authorization server sends the user once the app has been successfully authorized and granted an authorization code or access token.</span></span> <span data-ttu-id="faa51-128">Autorizavimo serveris siunčia kodą arba žetoną į peradresavimo URI; Todėl svarbu užregistruoti tinkamą vietą kaip programos registracijos proceso dalį.</span><span class="sxs-lookup"><span data-stu-id="faa51-128">The authorization server sends the code or token to the redirect URI; so it's important you register the correct location as part of the app registration process.</span></span>

<span data-ttu-id="faa51-129">**Taikomosios programos parengimas**</span><span class="sxs-lookup"><span data-stu-id="faa51-129">**Application Provisioning**</span></span>

<span data-ttu-id="faa51-130">[Vadovėlis: kurti ir planuoti parengimo "SCIM" galinį punktą](https://docs.microsoft.com/azure/active-directory/app-provisioning/use-scim-to-provision-users-and-groups) – šiame straipsnyje aprašoma, kaip sukurti "SCIM" galinį punktą ir integruoti su "AAD" parengimo tarnyba.</span><span class="sxs-lookup"><span data-stu-id="faa51-130">[Tutorial: Develop and plan provisioning for a SCIM endpoint](https://docs.microsoft.com/azure/active-directory/app-provisioning/use-scim-to-provision-users-and-groups) - This article describes how to build an SCIM endpoint and integrate with the AAD provisioning service.</span></span>


